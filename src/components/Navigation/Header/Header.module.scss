@use "@styles/base/_color";
@use "@styles/base/_typography";
@use "@styles/helpers/_mixins";
@use "@styles/helpers/_variables";
@import "include-media/dist/_include-media";

.burger-menu {
  z-index: variables.$z-index-2;
  position: absolute;
  top: variables.$spacing-6;
  right: variables.$spacing-6;
  overflow: hidden;
  cursor: pointer;
  @include mixins.size(60px);

  .frame {
    @include mixins.absolute-full;
    z-index: -1;
  }

  .menu {
    z-index: 2;
    @include mixins.absolute-full;

    .line {
      position: absolute;
      overflow: hidden;

      &--foreground,
      &--background {
        @include mixins.absolute-full;
        backface-visibility: visible;
      }

      &--foreground {
        background-color: variables.$white;
      }

      &--background {
        background-color: variables.$black;
      }

      @for $i from 1 through 3 {
        &:nth-child(#{$i}) {
          .line--foreground {
            transition-delay: 100ms * $i;
          }
        }
      }
    }

    &--closed {
      .line {
        height: 1px;
        width: 18px;
        left: 21px;

        @for $i from 0 to 3 {
          &:nth-child(#{$i + 1}) {
            top: 26px + ($i * 4);
          }
        }

        &--foreground {
          transform: translateX(100%);
          transition: transform 500ms cubic-bezier(0.95, 0.05, 0.795, 0.035);
        }
      }
    }

    &--opened {
      .line {
        height: 18px;
        width: 1px;
        top: 21px;
        left: 29px;

        &:nth-child(1) {
          transform: rotate(-45deg);
        }
        &:nth-child(2) {
          transform: rotate(45deg);
        }

        &--foreground {
          transform: translateY(100%);
          transition: transform 500ms cubic-bezier(0.95, 0.05, 0.795, 0.035);
        }
      }
    }
  }

  .frame {
    line {
      stroke-width: 5;
      stroke: color.$black-24;
      fill: none;
      stroke-dasharray: 60;
      transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);
    }
  }

  &:hover,
  &--active {
    .frame {
      line {
        stroke: variables.$red;
      }
      line:first-child {
        transform: translateX(-120px);
      }
      line:nth-child(2) {
        transform: translateY(-120px);
      }
      line:nth-child(3) {
        transform: translateX(120px);
      }
      line:last-child {
        transform: translateY(120px);
      }
    }
  }

  &:hover,
  &--hover {
    .frame {
      line {
        stroke-width: 10;
        stroke-dasharray: 70 40;
      }
      line:first-child {
        transform: translateX(-60px);
      }
      line:nth-child(2) {
        transform: translateY(-60px);
      }
      line:nth-child(3) {
        transform: translateX(60px);
      }
      line:last-child {
        transform: translateY(60px);
      }
    }

    .menu {
      &--closed {
        .line--foreground {
          transform: translateX(0);
        }
      }

      &--opened {
        .line--foreground {
          transform: translateY(0);
        }
      }
    }
  }
}
